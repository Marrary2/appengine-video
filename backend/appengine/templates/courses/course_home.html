{% extends 'courses/course_base.html' %}
{% block js %}
    <script type="text/javascript" src="/static/angular/js/angular.min.js"></script>
    <script type="text/javascript" src="/static/curso/js/curso.js"></script>
    <script type="text/javascript" src="/static/curso/js/curso_api_mock.js"></script>
    <script type="text/javascript">
{#        var rest = angular.module('rest', []);#}
{#        rest.factory('CursoApi', function ($http) {#}
{#            return {#}
{#                salvar: function (curso) {#}
{#                    return $http.post('{{ rest_new_path }}', curso);#}
{#                }#}
{#            };#}
{#        });#}


        var cursoApp = angular.module('cursoApp', ['cursoModulo']);
        function CursoController($scope) {
            $scope.curso = {title: 'App Engine', price: '1,00'};
            $scope.mostrarFormFlag = false;

            $scope.mostrarOuEsconderForm = function () {
                $scope.mostrarFormFlag = !$scope.mostrarFormFlag;
            }

        }
    </script>
{% endblock %}
{% block body %}
    <div class="container">
        <div class="row">
            <div class="col-md-12" ng-app="cursoApp" ng-controller="CursoController">

                <h1>{% trans %}This is a generic home for course_app {% endtrans %}  </h1>
                <button class="btn btn-success" ng-click="mostrarOuEsconderForm()">Criar Novo Curso</button>
                <br/>
                <br/>
                <cursoform ng-show="mostrarFormFlag" course="curso" title-label="Título"
                           price-label="Preço"></cursoform>
                <hr/>
                <h2>{% trans %}List of Courses{% endtrans %}</h2>
                <table class="table table-striped table-hover">
                    <thead>
                    <tr>
                        <th/>
                        <th>{% trans %}Id{% endtrans %}</th>
                        <th>{% trans %}Creation{% endtrans %}</th>
                        <th>{% trans %}Price{% endtrans %}</th>
                        <th>{% trans %}Title{% endtrans %}</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for course in courses %}
                        <tr>
                            <td><a href="{{ course.edit_path }}" class="btn btn-success btn-sm"><i
                                    class="glyphicon glyphicon-pencil"></i></a></td>
                            <td>{{ course.id }}</td>
                            <td>{{ course.creation }}</td>
                            <td>{{ course.price }}</td>
                            <td>{{ course.title }}</td>
                            <td>
                                <form action="{{ course.delete_path }}" method="post"
                                      onsubmit="return confirm('{{ _('Are you sure to delete? Press cancel to avoid deletion.') }}');">
                                    {{ csrf_input() }}
                                    <button class="btn btn-danger btn-sm"><i
                                            class="glyphicon glyphicon-trash"></i></button>
                                </form>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
{% endblock %}